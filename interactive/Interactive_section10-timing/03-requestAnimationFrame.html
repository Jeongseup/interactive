<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta http-equiv="X-UA-Compatible" content="ie=edge" />
        <title>requestAnimationFrame</title>
        <style>
            .btn {
                font-size: 2rem;
            }
        </style>
    </head>
    <body>
        <button class="btn">취소</button>

        <script>
            let timeId;
            let n = 0;
            const btn = document.querySelector(".btn");

            function sample() {
                n++;
                console.log(n);
                if (n > 200) {
                    return;
                }
                //반복시킬 함수 안에다가 requestAnimationFrame를 실행한다. 그리고 다시 sample를 잡아서
                //계속 실행이되는것이다.
                //목표가 60분의 1초이다. 즉, 1초당 60번 반복을 목표로한다. -> 따라서 상황에따라 쫌 더 느려질 수 있다.

                // console.log("sample");
                timeId = requestAnimationFrame(sample);
            }

            sample();

            //버튼을 누르면 캔슬하는 기능이다.
            btn.addEventListener("click", function () {
                cancelAnimationFrame(timeId);
            });
        </script>
    </body>
</html>
